"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = require("path");
const util_1 = require("./util");
const program = require("commander");
program
    .option('-m, --module', '是否创建模块', false)
    .option('-j, --javascript', '是否创建javascript文件', false)
    .option('-d, --dir <dirname>', '文件目录', './')
    .parse(process.argv);
const config = util_1.getWorkspaceConfig();
const fname = `${program.args[0] || `script${Date.now()}`}.${program.opts().javascript ? 'auto.js' : 'auto.ts'}`;
const saveDir = (config && (config.generate && config.generate.dir)) || program.opts().dir;
const fullpath = path_1.resolve(program.opts().dir, fname);
console.log(`生成位置：${fullpath}`);
if (fs_1.existsSync(fullpath)) {
    throw "文件已存在";
}
else {
    util_1.mkdirsSync(path_1.dirname(fullpath));
    fs_1.writeFileSync(fullpath, fs_1.readFileSync(path_1.join(__dirname, '../template/script.tpl'), 'utf-8').replace(RegExp('{{#name}}', 'g'), program.args[0] || `script${Date.now()}`));
}
