"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const webpack_sources_1 = require("webpack-sources");
class AutoJSUI {
    constructor(UIScriptList) {
        this.UIScriptList = UIScriptList;
    }
    apply(compiler) {
        compiler.hooks.compilation.tap('AutoJSUI', (compilation, normalModuleFactory) => {
            compilation.hooks.optimizeChunkAssets.tap('AutoJSUI', (chunks) => {
                for (const chunk of chunks) {
                    if (chunk.canBeInitial()) {
                        if (this.UIScriptList.includes(chunk.name)) {
                            chunk.files.forEach(file => {
                                compilation.assets[file] = new webpack_sources_1.ConcatSource('"ui";', '\n', compilation.assets[file]);
                            });
                        }
                    }
                }
            });
        });
    }
}
exports.AutoJSUI = AutoJSUI;
